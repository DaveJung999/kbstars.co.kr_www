name: Deploy to Server
# í…ŒìŠ¤íŠ¸ ë°°í¬ íŠ¸ë¦¬ê±°

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Execute Remote SSH Commands
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          key: ${{ secrets.SERVER_SSH_KEY }}
          debug: true
          script: |
            echo "ğŸš€ ë°°í¬ ì‹œì‘"
            # 1. í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
            cd /home/kbstars/kbstars.co.kr_www
          
            # 2. ì„œë²„ì˜ ë¡œì»¬ ë³€ê²½ì‚¬í•­ ë¬´ì‹œí•˜ê³  ê°•ì œ ë™ê¸°í™” (ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•)
            git fetch origin main
            git reset --hard origin/main
          
            echo "âœ… ë°°í¬ ì™„ë£Œ"